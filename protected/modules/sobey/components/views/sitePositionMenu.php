<div class="left" id="left">    <div class="sousuo">        <input type="text" class="fl" id="site_search_text"/>        <a href="javascript:void(0);"><img id="site_search_img" src="<?php echo Yii::app()->request->baseUrl; ?>/images/view.gif" /></a>    </div>    <div class="weblist font18"><a href="javascript:void(0);">站点列表</a> </div>    <ul class="cj_nav" id="t_nav">    </ul></div><script type="text/javascript">    var siteGroups = <?php echo json_encode($siteGroups); ?>;    var hasGroupSites = <?php echo json_encode($hasGroupSites); ?>;    var noneGroupSites = <?php echo json_encode($noneGroupSites); ?>;    $(document).ready(function() {                $('#site_search_text').keyup(function(){            search_site();        });                init_site_menu();    });        function init_site_menu(){        create_site_menu(siteGroups, hasGroupSites, noneGroupSites, true);    }        function search_site(){        var search_text = $.trim($('#site_search_text').val());        if(search_text == ''){            create_site_menu(siteGroups, hasGroupSites, noneGroupSites, true);            $('#site_search_img').attr('onclick', '');            $('#site_search_img').attr('src', '<?php echo Yii::app()->request->baseUrl; ?>/images/view.gif');        }else{            var group_keys = ereg_group(search_text, siteGroups);            var group_site_keys = ereg_group_site(search_text, hasGroupSites);            var other_site_keys = ereg_site(search_text, noneGroupSites);                        var new_groups = new Array();            var new_group_sites = new Array();            var new_other_sites = new Array();            var new_group_sites_parent = new Array();            for(i in group_site_keys){                for(j in group_site_keys[i]){                    if(!new_group_sites[i])                        new_group_sites[i] = new Array();                    new_group_sites[i].push(hasGroupSites[i][j]);                }                new_group_sites_parent.push(i);            }                        for(i in siteGroups){                if($.inArray(i, group_keys) >= 0 || $.inArray(siteGroups[i].id, new_group_sites_parent) >= 0)                    new_groups.push(siteGroups[i]);            }                        for(i in other_site_keys){                new_other_sites.push(noneGroupSites[other_site_keys[i]]);            }                        create_site_menu(new_groups, new_group_sites, new_other_sites);            $('#site_search_img').attr('src', '<?php echo Yii::app()->request->baseUrl; ?>/images/view_clean.gif');            $('#site_search_img').attr('onclick', '$("#site_search_text").val("");search_site();');        }    }        function ereg_group(str, arr) {        var id_array = new Array();        for(var i in arr) {            if(arr[i].name.lastIndexOf(str) >= 0) {                id_array.push(i)            }        }        return id_array;    }        function ereg_group_site(str, arr) {        var id_array = new Array();        for(var i in arr) {            for(j in arr[i]){                if(arr[i][j].name.lastIndexOf(str) >= 0) {                    if(!id_array[i])                        id_array[i] = new Array();                    id_array[i][j] = j;                }            }        }        return id_array;    }        function ereg_site(str, arr) {        var id_array = new Array();        for(var i in arr) {            if(arr[i].name.lastIndexOf(str) >= 0) {                id_array.push(i);            }        }        return id_array;    }    function create_site_menu(group, gourp_site, other_site, is_init){        var html  = '';        if(is_init){            html += '<li class="now">';            html += '    <div class="navtit">';            html += '         <b></b><span><a href="<?php echo Yii::app()->createUrl($route); ?>">所有站点</a></span>';            html += '    </div>';            html += '</li>';            html += '<li>';            html += '    <div class="navtit">';            html += '        <b></b><span><a href="<?php echo Yii::app()->createUrl($route, array('siteId' => 0)); ?>">未设置站点</a></span>';            html += '    </div>';            html += '</li>';        }        for(i in group){            html += '<li>';            html += '    <div class="navtit">';            html += '        <b class="more"></b><span><a href="' + group[i].url +'">' + group[i].name +'</a></span>';            html += '    </div>';            html += '    <ul>';            if(gourp_site[group[i].id] && gourp_site[group[i].id].length > 0){                for(j in gourp_site[group[i].id]){                    html += '<li>';                    html += '    <div class="navtit">';                    html += '        <b></b><span><a href="' + gourp_site[group[i].id][j].url + '">' + gourp_site[group[i].id][j].name + '</a></span>';                    html += '    </div>';                    html += '</li>';                }            }            html += '    </ul>';            html += '</li>';        }                for(i in other_site){            html += '<li>';            html += '<div class="navtit">';            html += '	<b></b><span><a href="' + other_site[i].url + '">' + other_site[i].name + '</a></span>';            html += '</div>';            html += '</li>';                    }        $('#t_nav').html(html);        _s_tab("t_nav","li","t_caidname","onclick",0,"innerHTML"); //为第一层赋值;                $("#t_nav").find("a").click(function(e){            ajax_load("ggw_box", $(this).attr("href"));            e.preventDefault();        });    }</script>  